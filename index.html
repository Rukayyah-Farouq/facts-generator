

<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Random Fact Generator</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Comic Sans MS', 'Chalkboard SE', 'Arial Rounded MT Bold', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    html {
      height: 100%;
    }

    .container {
      text-align: center;
      padding: 40px 20px;
      max-width: 600px;
      width: 90%;
    }

    .header {
      margin-bottom: 40px;
      animation: fadeInDown 0.8s ease-out;
    }

    h1 {
      color: #ffffff;
      font-size: 48px;
      margin: 0 0 10px 0;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
      font-weight: bold;
    }

    .subtitle {
      color: #f0e7ff;
      font-size: 18px;
      margin: 0;
    }

    .fact-card {
      background: white;
      border-radius: 24px;
      padding: 40px 30px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      margin-bottom: 30px;
      min-height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
      animation: fadeInUp 0.8s ease-out;
    }

    .fact-card::before {
      content: 'üí°';
      position: absolute;
      top: 20px;
      left: 20px;
      font-size: 32px;
      opacity: 0.3;
    }

    .fact-text {
      color: #333;
      font-size: 24px;
      line-height: 1.6;
      font-weight: 500;
      padding-right: 60px;
    }

    .placeholder-text {
      color: #999;
      font-style: italic;
    }

    .like-btn {
      position: absolute;
      top: 50%;
      right: 20px;
      transform: translateY(-50%);
      background: transparent;
      border: none;
      cursor: pointer;
      font-size: 32px;
      transition: all 0.3s ease;
      padding: 8px;
      border-radius: 50%;
    }

    .like-btn:hover {
      transform: translateY(-50%) scale(1.2);
      background: rgba(255, 192, 203, 0.2);
    }

    .like-btn.liked .heart {
      animation: heartBeat 0.5s ease;
    }

    .fact-counter {
      display: none;
    }

    @keyframes heartBeat {
      0%, 100% {
        transform: scale(1);
      }
      25% {
        transform: scale(1.3);
      }
      50% {
        transform: scale(1.1);
      }
      75% {
        transform: scale(1.2);
      }
    }

    .button-container {
      /* No animation */
    }

    .generate-btn {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
      border: none;
      border-radius: 50px;
      padding: 18px 48px;
      font-size: 20px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 6px 20px rgba(245, 87, 108, 0.4);
      transition: all 0.3s ease;
      font-family: inherit;
    }

    .generate-btn:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 8px 25px rgba(245, 87, 108, 0.5);
    }

    .generate-btn:active {
      transform: translateY(-1px) scale(1.02);
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes bounce {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
    }

    .fact-card.animate {
      /* No animation */
    }

    .emoji-decoration {
      position: absolute;
      font-size: 40px;
      opacity: 0.2;
      animation: float 3s ease-in-out infinite;
    }

    .emoji-1 {
      top: 10%;
      left: 5%;
      animation-delay: 0s;
    }

    .emoji-2 {
      top: 20%;
      right: 8%;
      animation-delay: 1s;
    }

    .emoji-3 {
      bottom: 15%;
      left: 10%;
      animation-delay: 2s;
    }

    .emoji-4 {
      bottom: 10%;
      right: 5%;
      animation-delay: 1.5s;
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0) rotate(0deg);
      }
      50% {
        transform: translateY(-20px) rotate(5deg);
      }
    }

    .favorites-toggle, .share-toggle {
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: 2px solid white;
      border-radius: 50px;
      padding: 12px 30px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: inherit;
    }

    .favorites-toggle:hover, .share-toggle:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.05);
    }

    .share-panel {
      background: white;
      border-radius: 24px;
      padding: 30px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      margin-bottom: 30px;
      display: none;
    }

    .share-panel.show {
      display: block;
      animation: fadeInUp 0.5s ease-out;
    }

    .share-title {
      color: #333;
      font-size: 24px;
      margin: 0 0 20px 0;
      font-weight: bold;
      text-align: center;
    }

    .social-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .social-btn {
      background: #f8f9fa;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .social-btn:hover {
      transform: translateY(-5px) scale(1.1);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .twitter-btn:hover {
      background: #1DA1F2;
    }

    .facebook-btn:hover {
      background: #4267B2;
    }

    .instagram-btn:hover {
      background: linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);
    }

    .whatsapp-btn:hover {
      background: #25D366;
    }

    .copy-btn:hover {
      background: #6c757d;
    }

    .share-note {
      text-align: center;
      color: #28a745;
      font-size: 14px;
      margin: 15px 0 0 0;
      min-height: 20px;
      font-weight: bold;
    }

    .favorites-panel {
      background: white;
      border-radius: 24px;
      padding: 30px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      margin-bottom: 30px;
      max-height: 400px;
      overflow-y: auto;
      display: none;
    }

    .favorites-panel.show {
      display: block;
      animation: fadeInUp 0.5s ease-out;
    }

    .favorites-title {
      color: #333;
      font-size: 28px;
      margin: 0 0 20px 0;
      font-weight: bold;
    }

    .favorites-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .favorite-item {
      background: #f8f9fa;
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s ease;
    }

    .favorite-item:hover {
      background: #e9ecef;
      transform: translateX(5px);
    }

    .favorite-text {
      color: #333;
      font-size: 16px;
      line-height: 1.5;
      flex: 1;
      text-align: left;
    }

    .remove-btn {
      background: transparent;
      border: none;
      cursor: pointer;
      font-size: 24px;
      padding: 5px;
      transition: transform 0.2s ease;
      margin-left: 10px;
    }

    .remove-btn:hover {
      transform: scale(1.2);
    }

    .empty-favorites {
      color: #999;
      font-style: italic;
      text-align: center;
      padding: 40px 20px;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
</head>
<body>
  <div class="emoji-decoration emoji-1">
   üåü
  </div>
  <div class="emoji-decoration emoji-2">
   ‚ú®
  </div>
  <div class="emoji-decoration emoji-3">
   üé®
  </div>
  <div class="emoji-decoration emoji-4">
   üé≠
  </div>
  <div class="container">
   <header class="header">
    <h1 id="page-title">Fun Fact Generator</h1>
    <p class="subtitle" id="page-subtitle">Discover amazing facts from around the world!</p>
   </header>
   <div style="display: flex; gap: 15px; justify-content: center; margin-bottom: 20px;"><button class="favorites-toggle" id="favorites-toggle">ÔøΩÔøΩÔøΩÔ∏è View Favorites</button> <button class="share-toggle" id="share-toggle">üì§ Share</button>
   </div>
   <div class="share-panel" id="share-panel">
    <h3 class="share-title">Share this fact</h3>
    <div class="social-buttons"><button class="social-btn twitter-btn" id="twitter-share" title="Share on X (Twitter)">
      <svg width="28" height="28" viewbox="0 0 24 24" fill="#000"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
      </svg></button> <button class="social-btn facebook-btn" id="facebook-share" title="Share on Facebook">
      <svg width="28" height="28" viewbox="0 0 24 24" fill="#4267B2"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
      </svg></button> <button class="social-btn instagram-btn" id="instagram-share" title="Share on Instagram">
      <svg width="28" height="28" viewbox="0 0 24 24" fill="url(#instagram-gradient)"><defs>
        <lineargradient id="instagram-gradient" x1="0%" y1="100%" x2="100%" y2="0%">
         <stop offset="0%" style="stop-color:#FD5949;stop-opacity:1" />
         <stop offset="50%" style="stop-color:#D6249F;stop-opacity:1" />
         <stop offset="100%" style="stop-color:#285AEB;stop-opacity:1" />
        </lineargradient>
       </defs> <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
      </svg></button> <button class="social-btn whatsapp-btn" id="whatsapp-share" title="Share on WhatsApp">
      <svg width="28" height="28" viewbox="0 0 24 24" fill="#25D366"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z" />
      </svg></button> <button class="social-btn copy-btn" id="copy-share" title="Copy to clipboard">
      <svg width="28" height="28" viewbox="0 0 24 24" fill="#6c757d"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />
      </svg></button>
    </div>
    <p class="share-note" id="share-note"></p>
   </div>
   <div class="favorites-panel" id="favorites-panel">
    <h2 class="favorites-title">Your Favorite Facts</h2>
    <ul class="favorites-list" id="favorites-list"></ul>
   </div>
   <main class="fact-card" id="fact-card">
    <p class="fact-text placeholder-text" id="fact-text">Click the button below to discover an amazing fact!</p><button class="like-btn" id="like-btn" style="display: none;"> <span class="heart">ü§ç</span> </button>
    <div class="fact-counter" id="fact-counter">
     Fact 0 of 100
    </div>
   </main>
   <div class="button-container"><button class="generate-btn" id="generate-btn">‚ú® <span id="button-text">Generate Fact</span> ‚ú®</button>
   </div>
  </div>
  <script>
    const defaultConfig = {
      page_title: "Fun Fact Generator",
      page_subtitle: "Discover amazing facts from around the world!",
      button_text: "Generate Fact",
      background_color: "#667eea",
      secondary_surface_color: "#ffffff",
      text_color: "#333333",
      primary_action_color: "#f5576c",
      secondary_action_color: "#764ba2",
      font_family: "Comic Sans MS",
      font_size: 16
    };

    async function onConfigChange(config) {
      const customFont = config.font_family || defaultConfig.font_family;
      const baseFontStack = "'Chalkboard SE', 'Arial Rounded MT Bold', sans-serif";
      const baseSize = config.font_size || defaultConfig.font_size;

      const backgroundColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.secondary_surface_color || defaultConfig.secondary_surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryActionColor = config.primary_action_color || defaultConfig.primary_action_color;
      const secondaryActionColor = config.secondary_action_color || defaultConfig.secondary_action_color;

      document.body.style.background = `linear-gradient(135deg, ${backgroundColor} 0%, ${secondaryActionColor} 100%)`;
     
      document.querySelector('.fact-card').style.background = surfaceColor;
      document.querySelector('.fact-text').style.color = textColor;
     
      document.querySelector('.generate-btn').style.background = `linear-gradient(135deg, #f093fb 0%, ${primaryActionColor} 100%)`;
      document.querySelector('.generate-btn').style.boxShadow = `0 6px 20px ${primaryActionColor}66`;

      document.getElementById('page-title').textContent = config.page_title || defaultConfig.page_title;
      document.getElementById('page-subtitle').textContent = config.page_subtitle || defaultConfig.page_subtitle;
      document.getElementById('button-text').textContent = config.button_text || defaultConfig.button_text;

      document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;
      document.querySelector('h1').style.fontSize = `${baseSize * 3}px`;
      document.querySelector('.subtitle').style.fontSize = `${baseSize * 1.125}px`;
      document.querySelector('.fact-text').style.fontSize = `${baseSize * 1.5}px`;
      document.querySelector('.generate-btn').style.fontSize = `${baseSize * 1.25}px`;
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig: defaultConfig,
        onConfigChange: onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.secondary_surface_color || defaultConfig.secondary_surface_color,
              set: (value) => {
                config.secondary_surface_color = value;
                window.elementSdk.setConfig({ secondary_surface_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.primary_action_color || defaultConfig.primary_action_color,
              set: (value) => {
                config.primary_action_color = value;
                window.elementSdk.setConfig({ primary_action_color: value });
              }
            },
            {
              get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
              set: (value) => {
                config.secondary_action_color = value;
                window.elementSdk.setConfig({ secondary_action_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ["page_title", config.page_title || defaultConfig.page_title],
          ["page_subtitle", config.page_subtitle || defaultConfig.page_subtitle],
          ["button_text", config.button_text || defaultConfig.button_text]
        ])
      });
    }

    const factCard = document.getElementById('fact-card');
    const factText = document.getElementById('fact-text');
    const generateBtn = document.getElementById('generate-btn');
    const likeBtn = document.getElementById('like-btn');
    const factCounter = document.getElementById('fact-counter');
    const favoritesToggle = document.getElementById('favorites-toggle');
    const favoritesPanel = document.getElementById('favorites-panel');
    const favoritesList = document.getElementById('favorites-list');
    const shareToggle = document.getElementById('share-toggle');
    const sharePanel = document.getElementById('share-panel');
    const shareNote = document.getElementById('share-note');
    const twitterShare = document.getElementById('twitter-share');
    const facebookShare = document.getElementById('facebook-share');
    const instagramShare = document.getElementById('instagram-share');
    const whatsappShare = document.getElementById('whatsapp-share');
    const copyShare = document.getElementById('copy-share');
   
    let currentFact = '';
    let likedFacts = JSON.parse(localStorage.getItem('likedFacts')) || {};
    let isLoadingFact = false;

    let shownFacts = new Set();

    // Fetch a single random fact from API
    async function fetchNewFact() {
      if (isLoadingFact) return null;
     
      isLoadingFact = true;
      let attempts = 0;
      let newFact = null;
     
      while (attempts < 5) {
        try {
          const response = await fetch('https://asli-fun-fact-api.herokuapp.com/');
          const data = await response.json();
          newFact = data.text;
         
          // Check if we've already shown this fact
          if (!shownFacts.has(newFact)) {
            shownFacts.add(newFact);
            isLoadingFact = false;
            return newFact;
          }
          attempts++;
        } catch (error) {
          break;
        }
      }
     
      isLoadingFact = false;
     
      // Fallback facts if API fails or all attempts showed duplicates
      const fallbackFacts = [
        "Honey never spoils! Archaeologists have found 3000-year-old honey in Egyptian tombs that was still perfectly edible.",
        "Octopuses have three hearts and blue blood!",
        "A group of flamingos is called a 'flamboyance'.",
        "Bananas are berries, but strawberries aren't!",
        "The Eiffel Tower can be 6 inches taller during the summer due to thermal expansion.",
        "A day on Venus is longer than a year on Venus!",
        "Dolphins have names for each other and can call out to specific dolphins.",
        "Sea otters hold hands when they sleep to keep from drifting apart.",
        'The scientific term for brain freeze is ‚Äúsphenopalatine ganglioneuralgia.‚Äù',
        'Canadians say ‚Äúsorry‚Äù so much that a law was passed in 2009 declaring that an apology cant be used as evidence of admission to guilt.',
        'Back when dinosaurs existed, there used to be volcanoes that were erupting on the moon.',
        'The only letters that dont appear on the periodic table are ‚ÄúJ‚Äù and ‚ÄúQ.‚Äù',
        'One habit of intelligent humans is being easily annoyed by people around them but saying nothing in order to avoid a meaningless argument.',
        'If a Polar Bear and a Grizzly Bear mate, their offspring is called a ‚ÄúPizzy Bear.‚Äù',
        'In 2006, a Coca-Cola employee offered to sell Coca-Cola secrets to Pepsi. Pepsi responded by notifying Coca-Cola.',
        'The ten highest mountain summits in the United States are all located in Alaska.',
        "Nintendo trademarked the phrase ‚ÄúIt's on like Donkey Kong‚Äù in 2010."
      ];
     
      // Find a fallback fact that hasn't been shown yet
      for (let fact of fallbackFacts) {
        if (!shownFacts.has(fact)) {
          shownFacts.add(fact);
          return fact;
        }
      }
     
      // If all fallback facts have been shown, clear the set and return a random one
      shownFacts.clear();
      const randomFact = fallbackFacts[Math.floor(Math.random() * fallbackFacts.length)];
      shownFacts.add(randomFact);
      return randomFact;
    }



    function updateLikeButton() {
      const factKey = currentFact;
      if (likedFacts[factKey]) {
        likeBtn.querySelector('.heart').textContent = '‚ù§Ô∏è';
        likeBtn.classList.add('liked');
      } else {
        likeBtn.querySelector('.heart').textContent = 'ü§ç';
        likeBtn.classList.remove('liked');
      }
    }

    function renderFavorites() {
      favoritesList.innerHTML = '';
      const likedFactsArray = Object.keys(likedFacts);
     
      if (likedFactsArray.length === 0) {
        favoritesList.innerHTML = '<li class="empty-favorites">No favorite facts yet! Like some facts to see them here.</li>';
        return;
      }

      likedFactsArray.forEach(fact => {
        const li = document.createElement('li');
        li.className = 'favorite-item';
       
        const textSpan = document.createElement('span');
        textSpan.className = 'favorite-text';
        textSpan.textContent = fact;
       
        const removeBtn = document.createElement('button');
        removeBtn.className = 'remove-btn';
        removeBtn.innerHTML = '‚úñÔ∏è';
        removeBtn.addEventListener('click', () => {
          delete likedFacts[fact];
          localStorage.setItem('likedFacts', JSON.stringify(likedFacts));
          renderFavorites();
          if (currentFact === fact) {
            updateLikeButton();
          }
        });
       
        li.appendChild(textSpan);
        li.appendChild(removeBtn);
        favoritesList.appendChild(li);
      });
    }

    favoritesToggle.addEventListener('click', () => {
      favoritesPanel.classList.toggle('show');
      sharePanel.classList.remove('show');
      if (favoritesPanel.classList.contains('show')) {
        favoritesToggle.textContent = '‚úñÔ∏è Close Favorites';
        shareToggle.textContent = 'üì§ Share';
        renderFavorites();
      } else {
        favoritesToggle.textContent = '‚ù§Ô∏è View Favorites';
      }
    });

    shareToggle.addEventListener('click', () => {
      if (!currentFact) {
        shareNote.textContent = 'Generate a fact first!';
        shareNote.style.color = '#dc3545';
        setTimeout(() => {
          shareNote.textContent = '';
        }, 2000);
        return;
      }
     
      sharePanel.classList.toggle('show');
      favoritesPanel.classList.remove('show');
      if (sharePanel.classList.contains('show')) {
        shareToggle.textContent = '‚úñÔ∏è Close Share';
        favoritesToggle.textContent = '‚ù§Ô∏è View Favorites';
        shareNote.textContent = '';
      } else {
        shareToggle.textContent = 'üì§ Share';
      }
    });

    twitterShare.addEventListener('click', () => {
      const text = encodeURIComponent(`Did you know? ${currentFact}`);
      const url = `https://twitter.com/intent/tweet?text=${text}`;
      window.open(url, '_blank', 'noopener,noreferrer');
    });

    facebookShare.addEventListener('click', () => {
      const text = encodeURIComponent(`Did you know? ${currentFact}`);
      const url = `https://www.facebook.com/sharer/sharer.php?quote=${text}`;
      window.open(url, '_blank', 'noopener,noreferrer');
    });

    instagramShare.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(`Did you know? ${currentFact}`);
        shareNote.textContent = '‚úì Copied! Open Instagram and paste in a story or post';
        shareNote.style.color = '#28a745';
        setTimeout(() => {
          shareNote.textContent = '';
        }, 3000);
      } catch (err) {
        shareNote.textContent = '‚úó Failed to copy';
        shareNote.style.color = '#dc3545';
        setTimeout(() => {
          shareNote.textContent = '';
        }, 2000);
      }
    });

    whatsappShare.addEventListener('click', () => {
      const text = encodeURIComponent(`Did you know? ${currentFact}`);
      const url = `https://wa.me/?text=${text}`;
      window.open(url, '_blank', 'noopener,noreferrer');
    });

    copyShare.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(`Did you know? ${currentFact}`);
        shareNote.textContent = '‚úì Copied to clipboard!';
        shareNote.style.color = '#28a745';
        setTimeout(() => {
          shareNote.textContent = '';
        }, 2000);
      } catch (err) {
        shareNote.textContent = '‚úó Failed to copy';
        shareNote.style.color = '#dc3545';
        setTimeout(() => {
          shareNote.textContent = '';
        }, 2000);
      }
    });

    generateBtn.addEventListener('click', async () => {
      // Fetch a fresh fact from the API
      const newFact = await fetchNewFact();
     
      if (newFact) {
        currentFact = newFact;
        factText.classList.remove('placeholder-text');
        factText.textContent = currentFact;
        likeBtn.style.display = 'block';
        updateLikeButton();
      }
    });

    likeBtn.addEventListener('click', () => {
      if (currentFact) {
        if (likedFacts[currentFact]) {
          delete likedFacts[currentFact];
        } else {
          likedFacts[currentFact] = true;
        }
        localStorage.setItem('likedFacts', JSON.stringify(likedFacts));
        updateLikeButton();
        if (favoritesPanel.classList.contains('show')) {
          renderFavorites();
        }
      }
    });
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a16b21fe5fc6926',t:'MTc2MzYyODU4NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>